{% extends 'frontend/base.html' %}
{% block content %}
    <!-- ***** Main Banner Area End ***** -->
    <div class="page-heading">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="header-text">
                        <h2>Create Account</h2>
                        <div class="div-dec"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ***** Main Banner Area End ***** -->

    <div class="container">
        <div class="register-form border-shadow">
            {% if messages %}
                <div class="message-container" id="alert_message">
                    {% for message in messages %}
                        <div class="notification {{message.tags}} fl-wrap">
                            <p>{{ message }}</p>
                            <a class="notification-close" href="#"><i class="fa fa-times"></i></a>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
            <h5 class="form-header">Fill in the form to create an account</h5>
            <form action="{% url 'user:create_account' %}" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="row">
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>{{ form.first_name.label }}</label>
                            {{ form.first_name }}
                            {% if form.first_name.errors %}
                                {% for error in form.first_name.errors %}
                                    <small class="text-danger">{{ error }}</small>
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>{{ form.last_name.label }}</label>
                            {{ form.last_name }}
                            {% if form.last_name.errors %}
                                {% for error in form.last_name.errors %}
                                    <small class="text-danger">{{ error }}</small>
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>{{ form.username.label }}</label>
                            {{ form.username }}
                            {% if form.username.errors %}
                                {% for error in form.username.errors %}
                                    <small class="text-danger">{{ error }}</small>
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>{{ form.email.label }}</label>
                            {{ form.email }}
                            {% if form.email.errors %}
                                {% for error in form.email.errors %}
                                    <small class="text-danger">{{ error }}</small>
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>{{ form.country.label }}</label>
                            <select name="country" id="id_country" class="form-select">
                                {% for country in countries %}
                                    {% if country.name == 'Nigeria' %}    
                                        <option value="{{ country.name }}" selected>{{ country.name }}</option>
                                    {% endif %}
                                {% endfor %}
                            </select>
                            {% if form.country.errors %}
                                {% for error in form.country.errors %}
                                    <small class="text-danger">{{ error }}</small>
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>{{ form.state.label }}</label>
                            <select name="state" id="id_state" class="form-select">
                                <option value="" selected disabled>Select your state</option>
                                {% for state in states %}
                                    <option value="{{ state.name }}">{{ state.name }}</option>
                                {% endfor %}
                            </select>
                            {% if form.state.errors %}
                                {% for error in form.state.errors %}
                                    <small class="text-danger">{{ error }}</small>
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>{{ form.city.label }}</label>
                            {{ form.city }}
                            {% if form.city.errors %}
                                {% for error in form.city.errors %}
                                    <small class="text-danger">{{ error }}</small>
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>{{ form.address.label }}</label>
                            {{ form.address }}
                            {% if form.address.errors %}
                                {% for error in form.address.errors %}
                                    <small class="text-danger">{{ error }}</small>
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>{{ form.password.label }}</label>
                            {{ form.password }}
                            {% if form.password.errors %}
                                {% for error in form.password.errors %}
                                    <small class="text-danger">{{ error }}</small>
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>{{ form.confirm_password.label }}</label>
                            {{ form.confirm_password }}
                            {% if form.confirm_password.errors %}
                                {% for error in form.confirm_password.errors %}
                                    <small class="text-danger">{{ error }}</small>
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-sm-12 mb-3">
                        <p>already have an account <a href="{% url 'user:login' %}">sign in</a></p>
                    </div>
                    <div class="col-sm-12">
                        <button type="submit" class="orange-button">Submit</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
    <script>
        $(".message-container .notification-close").on("click", function(){
            $(this).closest(".message-container").slideUp(300)
        })
    </script>
{% endblock %}